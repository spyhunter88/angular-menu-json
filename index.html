<!DOCTYPE HTML>
<html>
    <head>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link href="bs3-submenu.css" rel="stylesheet">
        <link href="menu-tree.css" rel="stylesheet">
        <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="jquery.plugin.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.13.0/ui-bootstrap-tpls.min.js"></script>
        <script src="app.js"></script>
        <script src="menuDirective.js"></script>
    </head>

    <body ng-app="app" ng-controller="menuController">
       <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="#/" class="navbar-brand">AngularJS</a>
                </div>
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav" bs-navbar>
                        <ng-menu-json menus="menus"></ng-menu-json>
                        <li data-match-route="/login"><a href="#/login">Sign In</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="jumbotron">
        </div>

        <div class="container">
            <div class="row">
                <button class="btn btn-default" ng-click="changeMenu()">Change Menu</button>
                <button class="btn btn-default" ng-click="loadJson()">From Flat JSON</button>
                <button class="btn btn-default" ng-click="flattenMenu()">Flatten Menu</button>
                <br>
                <label>Menu Data</label>
                <span>{{menus | json}}</span>
            </div>

            <div class="row" ng-show="false">
            <div class="col-md-10">
            <table class="table-nested">
                <thead>
                    <tr>
                        <th class="cell-input"><input type="checkbox" ng-checked="(list | selected).length == list.length" ng-click="toggleAllCheckboxes($event)">
                        </th>
                        <th class="cell-name">Name</th>
                        <th>Member</th>
                        <th>Title</th>
                    </tr>
                </thead>
                <tbody ng-class="{opened: item.opened}" ng-repeat="item in list" ng-include="'table_tree.html'">
                </tbody>
            </table>
            </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <ng-menu-table menu="list"></ng-menu-table>
                </div>
            </div>
        </div>



        <script type="text/ng-template" id="table_tree.html">
            <tr ng-class="{parent: item.children}" ng-init="parentScope = $parent.$parent; initCheckbox(item, parentScope.item)">
                <td class="cell-input">
                    <input type="checkbox" ng-model="item.selected" ng-change="toggleCheckbox(item, parentScope)">
                </td>
                <td class="cell-name" ng-click="item.opened = !item.opened">
                    <div class="indent" style="padding-left: {{15*level}}px;"></div>
                    {{item.name}}
                </td>
                <td>{{item.children.length}}</td>
                <td>{{item.title}}</td>
            </tr>
            <tr class="children" ng-if="item.children && item.children.length > 0">
            <td colspan="4">
                <table>
                    <tbody ng-class="{opened: item.opened}" ng-repeat="item in item.children" ng-include="'table_tree.html'" ng-init="level=level+1">
                    </tbody>
                </table>
            </td>
            </tr>
        </script>
    </body>
</html>